# FlowScan Railway Environment (raw-only validation)
# Full publish list: see docs/operations/deploy-env.md

# Core
DB_URL=postgres://USER:PASSWORD@HOST:PORT/DBNAME?sslmode=require
FLOW_ACCESS_NODE=access-001.mainnet28.nodes.onflow.org:9000
# Optional multi-node (overrides FLOW_ACCESS_NODE)
FLOW_ACCESS_NODES=access-001.mainnet28.nodes.onflow.org:9000,access-002.mainnet28.nodes.onflow.org:9000,access-003.mainnet28.nodes.onflow.org:9000
# Optional historic spork nodes used by the history ingester to cross spork roots.
FLOW_HISTORIC_ACCESS_NODES=access-001.mainnet28.nodes.onflow.org:9000,access-001.mainnet27.nodes.onflow.org:9000,access-001.mainnet26.nodes.onflow.org:9000
# Archive node fallback (optional)
FLOW_ARCHIVE_NODE=archive.mainnet.nodes.onflow.org:9000
PORT=8080
START_BLOCK=140900000

# Ingestion
LATEST_WORKER_COUNT=1
LATEST_BATCH_SIZE=1
HISTORY_WORKER_COUNT=2
HISTORY_BATCH_SIZE=5
ENABLE_HISTORY_INGESTER=false

# Derived (keep off for raw-only)
ENABLE_DERIVED_WRITES=false
ENABLE_TOKEN_WORKER=false
ENABLE_EVM_WORKER=false
ENABLE_META_WORKER=false
ENABLE_ACCOUNTS_WORKER=false
ENABLE_FT_HOLDINGS_WORKER=false
ENABLE_NFT_OWNERSHIP_WORKER=false
ENABLE_TX_CONTRACTS_WORKER=false
TOKEN_WORKER_RANGE=5000
EVM_WORKER_RANGE=5000
META_WORKER_RANGE=5000
ACCOUNTS_WORKER_RANGE=5000
FT_HOLDINGS_WORKER_RANGE=5000
NFT_OWNERSHIP_WORKER_RANGE=5000
TX_CONTRACTS_WORKER_RANGE=5000
TOKEN_WORKER_CONCURRENCY=1
EVM_WORKER_CONCURRENCY=1
META_WORKER_CONCURRENCY=1
ACCOUNTS_WORKER_CONCURRENCY=1
FT_HOLDINGS_WORKER_CONCURRENCY=1
NFT_OWNERSHIP_WORKER_CONCURRENCY=1
TX_CONTRACTS_WORKER_CONCURRENCY=1
ENABLE_DAILY_STATS=false
ENABLE_LOOKUP_REPAIR=false
LOOKUP_REPAIR_LIMIT=1000
LOOKUP_REPAIR_INTERVAL_MIN=10

# Live address backfill (optional)
ENABLE_LIVE_ADDRESS_BACKFILL=true
LIVE_ADDRESS_BACKFILL_BLOCKS=5000
LIVE_ADDRESS_BACKFILL_CHUNK=1000

# Flow RPC throttling
FLOW_RPC_RPS=5
FLOW_RPC_BURST=5
# Optional per-node (multiplies by number of access nodes)
FLOW_RPC_RPS_PER_NODE=0
FLOW_RPC_BURST_PER_NODE=0

# Safety
MAX_REORG_DEPTH=1000

# Storage tuning
# If >0, store raw.transactions.script inline only when size <= this limit.
# Otherwise scripts are de-duplicated via raw.scripts.
TX_SCRIPT_INLINE_MAX_BYTES=0

# Pool tuning (optional)
DB_MAX_OPEN_CONNS=10
DB_MAX_IDLE_CONNS=2

# Frontend (nginx reverse proxy)
BACKEND_API=http://backend.railway.internal:8080
BACKEND_WS=http://backend.railway.internal:8080

# Frontend (footer links)
# Set this after you generate a domain for the docs service.
DOCS_URL=https://<docs-domain>.up.railway.app

# Docs service (devportal)
BACKEND_API_URL=http://backend.railway.internal:8080
